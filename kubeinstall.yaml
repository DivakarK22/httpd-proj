---
 - hosts: kubernetes
   user: root
   tasks:
    - name: deploy httpd-proj on kubernetes
      shell: |
        kubectl delete deployment.apps/httpd-proj
        cd $HOME/git/httpd-proj
        git checkout portfolio-proj
        kubectl apply -f deploy.yaml
        kubectl apply -f service.yaml
        kubectl scale deployment.apps/httpd-proj --replicas=0
        kubectl scale deployment.apps/httpd-proj --replicas=1
        cd $HOME/git/httpd-proj
        git checkout portfolio-proj
        kubectl apply -f service.yaml
