
---
 - hosts: k8master
   user: root
   tasks:
    - name: deploy httpd-proj on kubernetes
      shell: |
        kubectl delete deployment.apps/wedding-proj
        cd $HOME/git
        git clone git@github.com:DivakarK22/httpd-proj.git
        cd $HOME/git/httpd-proj
        git checkout wedding-proj
        kubectl apply -f deploy.yaml
        kubectl apply -f service.yaml
        kubectl scale deployment.apps/wedding-proj --replicas=0
        kubectl scale deployment.apps/wedding-proj --replicas=1
        cd $HOME/git/httpd-proj
        git checkout wedding-proj
        kubectl apply -f service.yaml
